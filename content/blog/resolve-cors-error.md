---
title: CORS μ—λ¬ λ•λ¬Έμ— λ§‰ν SPARQL μ—”λ“ν¬μΈνΈλ¥Ό μ‘λ™μ‹μΌ λ³΄μ!
description: μ›Ή μ–΄ν”λ¦¬μΌ€μ΄μ… κ°λ°ν•  λ•λ§λ‹¤ SPARQL μ—”λ“ν¬μΈνΈκ°€ CORS μ—λ¬ λ•λ¬Έμ— μ‘λ™ν•μ§€ μ•μ•„ κ³¨λ¨Έλ¦¬λ¥Ό μ•“μ•λ‹¤. μ—¬λ¬ μ°¨λ΅€ μ‚½μ§ν• λ‹¤μμ— κ°€μ¥ μ‰½κ² CORS μ—λ¬λ¥Ό μ°νν•  μ μλ” λ°©λ²•μ„ μ•μ•„λƒλ‹¤!π’–
slug: resolve-cors-error
author: λ°•ν•λ
category: Knowledge Graph
datetime: 2022. 10. 25.
language: Korean
featured: Featured
tags:
  - CORS
  - SPARQL endpoint
  - nginx
  - apache
---

μ›Ή μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ κ°λ°ν•  λ•λ§λ‹¤ `SPARQL` μ—”λ“ν¬μΈνΈκ°€ `CORS` μ—λ¬ λ•λ¬Έμ— λ™μ‘ν•μ§€ μ•μ€ μ μ΄ λ§μ•λ‹¤. μ¨κ°– λΈ”λ΅κ·Έλ¥Ό μ°Ύμ•„λ³΄λ©° μ—¬λ¬ κ°€μ§€ λ°©λ²•μ„ μ‹λ„ν•΄λ΄¤μ§€λ§, μ§μ ‘μ μΈ ν•΄κ²°λ°©μ•μ„ λ¨λ¥΄κ³  μ΄μ  μ—†μ΄ μ‘λ™ν•λ” κ²½μ°(?)κ°€ μμ—λ‹¤. μ‚½μ§μ„ ν•λ‹¤κ°€ κ²°κµ­μ—!!! ν•΄κ²°ν• λ°©μ‹μ€ μ›Ή μ„λ²„ λ‹¨μ—μ„ μ°νμ μΌλ΅ `CORS` μ—λ¬λ¥Ό ν•΄κ²°ν•λ” λ°©λ²•μ„ μ•μ•„λƒλ‹¤!!!πΈ λ°”λ΅ μ›Ή ν—¤λ”μ— `Access-Control-Allow-Origin`μ„ μ„¤μ •ν•΄μ£Όλ” κ²ƒμ΄λ‹¤.

### Nginxμ—μ„ μ„¤μ •ν•κΈ°

`Nginx`μ— μ„¤μ •ν•΄μ£Όλ” λ°©λ²•μ€ μ•„λμ™€ κ°™μ΄ λ”±! 2μ¤„λ§ μ¶”κ°€ν•λ©΄ λλ‹¤. `/blazegraph/`λΌλ” ν•μ„ κ²½λ΅μ—μ„ `proxy_pass`λ¥Ό μ„¤μ •ν•΄μ£Όκ³ , μ•„λ 2μ¤„μ„ μ¶”κ°€ν•λ‹¤. μ›Ή μ–΄ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ¶λ¬μ¬ `SPARQL` μ—”λ“ν¬μΈνΈλ” `http://test.com/blazegraph/sparql`λ΅ μ„¤μ •ν•΄μ£Όμ–΄μ•Ό `CORS` μ—λ¬λ¥Ό μ°νν•  μ μλ‹¤.

```nginx
server {
    server_name test.com;

    location /blazegraph/ {
        proxy_hide_header Access-Control-Allow-Origin;
        add_header 'Access-Control-Allow-Origin' '*';
        proxy_pass http://localhost:9999/blazegraph/;
    }
}
```

### Apacheμ—μ„ μ„¤μ •ν•κΈ°

`Apache`λ„ `Nginx`μ™€ κ°™μ΄ ν—¤λ”λ¥Ό μ„¤μ •ν•΄μ£Όλ©΄ λλ‹¤. μ²«λ²μ§Έ μ¤„λ§ μ„¤μ •ν•΄μ¤λ„ μ‘λ™ν•μ§€λ§, `nosniff`μµμ…λ„ μ¶”κ°€ν•΄μ¤¬λ‹¤. `SPARQL` μ—”λ“ν¬μΈνΈλ” λ§μ°¬κ°€μ§€λ΅ `http://test.com/blazegraph/sparql`λ΅ μ„¤μ •ν•΄μ£Όλ©΄ λλ‹¤.

```apache
<VirtualHost *:80>
    ServerName test.com

    <IfModule mod_headers.c>
        Header set Access-Control-Allow-Origin "*"
        Header always set X-Content-Type-Options "nosniff"
    </IfModule>
<VirtualHost>
```

### CORS μ¤λ¥μ—¬, μ΄μ   μ•λ…•!

μ›Ή μ„λ²„ λ‹¨μ—μ„ ν—¤λ”λ΅ κ°„λ‹¨ν `CORS` μ—λ¬λ¥Ό μ°νν•  μ μλ” λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³΄μ•λ‹¤. λ³΄μ• μ΄μκ°€ μκΈ΄ ν•μ§€λ§, μ •λ§.. λ¬΄μν• μ‹λ„ λμ— ν•΄κ²°ν•΄ λ‚Έ λ°©λ²•μ΄λ‹¤..π¥² `SPARQL` μ—”λ“ν¬μΈνΈλ΅ ν†µμ‹ ν•  λ•λ§λ‹¤ λ‚νƒ€λ‚λ” μ΄μμ΄λ‹, λ„μ›€μ΄ λκΈΈ λ°”λ€λ‹¤.

μ°Έκ³ λ΅, ν—¤λ”λ¥Ό μ„¤μ •ν•΄μ£Όκ³ λ„ `SPARQL` μ—”λ“ν¬μΈνΈκ°€ λ™μ‘ν•μ§€ μ•μ„ μ μλ‹¤. λ‚μ κ²½μ°, `SPARQL` μ—”λ“ν¬μΈνΈλ΅ λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” μ›Ή μ–΄ν”λ¦¬μΌ€μ΄μ…μ€ `HTTPS`μΈλ°, `SPARQL` μ—”λ“ν¬μΈνΈκ°€ `HTTP`λ΅ μ‹μ‘ν•  λ• λ™μ‘ν•μ§€ μ•μ•λ‹¤ (λ°λ€μ κ²½μ°λ„ λ§μ°¬κ°€μ§€λ‹¤). μ΄λ΄ λ•λ” `HTTPS`λ΅ ν†µμΌν•μ—¬ ν†µμ‹ μ„ ν•λ©΄ μ—”λ“ν¬μΈνΈκ°€ μ λ™μ‘ν•λ‹¤.
